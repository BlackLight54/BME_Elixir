ExUnit.configure seed: 0

defmodule NHFTest do
  use ExUnit.Case

  # setup_all do
  # end

  # setup do
  #   IO.puts("setup: \n")
  # end

  @moduletag nhf: true

  defp eval(f, tss) do
    r = Khf1.to_internal(f) |> Nhf1.satrak() |> Enum.sort() |> IO.inspect(limit: :infinity)
    assert(r === Enum.sort(tss))
  end

  #@tag nhf0: true
  test "nhf_w_0" do
    Nhf1.satrak({[1, 1, 0, 3, 0], [1, 0, 2, 0, 2], [{1, 2}, {3, 3}, {3, 5}, {5, 1}, {5, 5}]})

    assert Nhf1.satrak(
             {[1, 1, 0, 3, 0], [1, 0, 2, 0, 2], [{1, 2}, {3, 3}, {3, 5}, {5, 1}, {5, 5}]}
           ) == [[:e, :s, :n, :n, :n]]
  end
  @tag nhf0: true
  test "nhf_w_1" do
    Nhf1.satrak(
      {[-1, -1, -1, 3, 0], [-1, -2, -2, 0, -2], [{1, 2}, {3, 3}, {3, 5}, {5, 1}, {5, 5}]}
    )

    assert Nhf1.satrak(
             {[-1, -1, -1, 3, 0], [-1, -2, -2, 0, -2], [{1, 2}, {3, 3}, {3, 5}, {5, 1}, {5, 5}]}
           ) == [[:w, :s, :n, :n, :n], [:s, :s, :n, :n, :n], [:e, :s, :n, :n, :n]]
  end

  test "01dpty" do
    eval("t01dpty.txt", [])
  end

  test "01dcol" do
    eval("t01dcol.txt", [[:n, :n], [:n, :s], [:s, :s]])
  end

  test "01drow" do
    eval("t01drow.txt", [[:e, :e], [:w, :e], [:w, :w]])
  end

  test "01d" do
    eval("test01d.txt", [[:w, :n, :e]])
  end

  test "03d" do
    eval("test03d.txt", [[:n, :e, :s, :w], [:n, :s, :n, :e], [:s, :n, :n, :e]])
  end

  test "06d" do
    eval("test06d.txt", [[:e, :e, :e, :s, :n, :w, :w, :s, :n, :w, :e, :s, :e, :e, :n]])
  end

  test "07d" do
    eval(
      "test07d.txt",
      [
        [:e, :n, :e, :e, :e, :n, :s, :w, :e, :e, :e, :e, :n, :w, :s, :n, :w, :n, :s, :e],
        [:e, :n, :e, :e, :e, :s, :n, :w, :e, :e, :e, :e, :n, :w, :s, :n, :w, :n, :s, :e]
      ]
    )
  end

  test "13d" do
    eval(
      "test13d.txt",
      [
        [
          :e,
          :s,
          :w,
          :s,
          :e,
          :s,
          :w,
          :n,
          :s,
          :e,
          :n,
          :e,
          :n,
          :e,
          :n,
          :e,
          :w,
          :e,
          :n,
          :s,
          :w,
          :s,
          :n,
          :s,
          :w,
          :w,
          :n,
          :n,
          :w,
          :n,
          :w,
          :w,
          :s,
          :n,
          :s,
          :s,
          :n,
          :e,
          :w,
          :w,
          :s,
          :e,
          :n
        ],
        [
          :e,
          :s,
          :w,
          :s,
          :e,
          :s,
          :w,
          :n,
          :s,
          :e,
          :n,
          :e,
          :n,
          :e,
          :n,
          :e,
          :w,
          :e,
          :n,
          :s,
          :w,
          :s,
          :n,
          :s,
          :w,
          :w,
          :n,
          :n,
          :w,
          :n,
          :w,
          :w,
          :s,
          :s,
          :n,
          :s,
          :n,
          :e,
          :w,
          :w,
          :s,
          :e,
          :n
        ],
        [
          :w,
          :s,
          :w,
          :s,
          :e,
          :s,
          :w,
          :n,
          :s,
          :e,
          :n,
          :e,
          :n,
          :e,
          :n,
          :e,
          :w,
          :e,
          :n,
          :s,
          :w,
          :s,
          :n,
          :s,
          :w,
          :w,
          :n,
          :n,
          :w,
          :n,
          :e,
          :w,
          :s,
          :s,
          :n,
          :s,
          :n,
          :e,
          :w,
          :w,
          :s,
          :e,
          :n
        ]
      ]
    )
  end

  test "15d" do
    eval(
      "test15d.txt",
      [
        [
          :w,
          :s,
          :w,
          :w,
          :s,
          :n,
          :w,
          :n,
          :e,
          :s,
          :e,
          :e,
          :s,
          :e,
          :e,
          :e,
          :e,
          :e,
          :n,
          :w,
          :s,
          :s,
          :e,
          :s,
          :e,
          :e,
          :n,
          :n,
          :s,
          :s,
          :s,
          :w,
          :w,
          :s,
          :w,
          :n,
          :e,
          :s,
          :w,
          :s,
          :w,
          :e,
          :w,
          :w,
          :s,
          :e,
          :e,
          :n,
          :s,
          :w,
          :e,
          :e,
          :e,
          :w,
          :n,
          :s,
          :s,
          :n,
          :s,
          :w,
          :e,
          :n,
          :e,
          :e,
          :n
        ]
      ]
    )
  end

  test "17d" do
    eval(
      "test17d.txt",
      [
        [
          :w,
          :s,
          :s,
          :e,
          :s,
          :e,
          :w,
          :n,
          :n,
          :s,
          :w,
          :s,
          :e,
          :e,
          :n,
          :s,
          :s,
          :n,
          :s,
          :n,
          :s,
          :w,
          :e,
          :e,
          :w,
          :e,
          :e,
          :s,
          :e,
          :n,
          :w,
          :w,
          :n,
          :s,
          :e,
          :n,
          :s,
          :e,
          :e,
          :w,
          :s,
          :w,
          :n,
          :e,
          :e,
          :e,
          :n,
          :n,
          :s,
          :n,
          :w,
          :w,
          :e,
          :n,
          :w,
          :n,
          :n,
          :e,
          :n
        ]
      ]
    )
  end

  test "18d" do
    t18s = [
      [
        :e,
        :e,
        :w,
        :e,
        :n,
        :s,
        :w,
        :n,
        :e,
        :e,
        :e,
        :n,
        :n,
        :n,
        :w,
        :w,
        :s,
        :e,
        :n,
        :n,
        :e,
        :e,
        :s,
        :e,
        :n,
        :s,
        :n,
        :s,
        :e,
        :w,
        :s,
        :s,
        :s,
        :e,
        :n,
        :s,
        :s,
        :n,
        :s,
        :s,
        :n,
        :s,
        :n,
        :n,
        :s,
        :w,
        :e,
        :w,
        :w,
        :e
      ],
      [
        :e,
        :e,
        :w,
        :e,
        :n,
        :s,
        :w,
        :n,
        :e,
        :e,
        :e,
        :n,
        :n,
        :n,
        :w,
        :w,
        :s,
        :e,
        :n,
        :n,
        :e,
        :e,
        :s,
        :e,
        :n,
        :s,
        :n,
        :s,
        :e,
        :w,
        :s,
        :s,
        :s,
        :e,
        :n,
        :s,
        :s,
        :n,
        :s,
        :s,
        :n,
        :s,
        :n,
        :n,
        :s,
        :w,
        :s,
        :w,
        :n,
        :e
      ],
      [
        :e,
        :e,
        :w,
        :e,
        :n,
        :s,
        :w,
        :n,
        :e,
        :e,
        :e,
        :n,
        :n,
        :n,
        :w,
        :w,
        :s,
        :e,
        :n,
        :n,
        :e,
        :e,
        :s,
        :e,
        :n,
        :s,
        :n,
        :s,
        :e,
        :w,
        :s,
        :s,
        :s,
        :e,
        :n,
        :s,
        :s,
        :n,
        :s,
        :s,
        :n,
        :s,
        :n,
        :n,
        :s,
        :w,
        :s,
        :w,
        :w,
        :n
      ],
      [
        :e,
        :e,
        :w,
        :e,
        :n,
        :s,
        :w,
        :n,
        :e,
        :e,
        :e,
        :n,
        :n,
        :n,
        :w,
        :w,
        :s,
        :e,
        :n,
        :n,
        :n,
        :e,
        :w,
        :e,
        :n,
        :s,
        :s,
        :s,
        :e,
        :w,
        :s,
        :s,
        :s,
        :e,
        :n,
        :s,
        :s,
        :n,
        :s,
        :s,
        :n,
        :s,
        :n,
        :n,
        :e,
        :e,
        :s,
        :w,
        :e,
        :e
      ],
      [
        :e,
        :e,
        :w,
        :e,
        :s,
        :s,
        :w,
        :n,
        :e,
        :e,
        :e,
        :n,
        :s,
        :n,
        :w,
        :w,
        :s,
        :e,
        :n,
        :e,
        :e,
        :e,
        :w,
        :s,
        :n,
        :s,
        :s,
        :s,
        :w,
        :w,
        :e,
        :s,
        :s,
        :e,
        :e,
        :s,
        :s,
        :n,
        :s,
        :s,
        :n,
        :s,
        :n,
        :n,
        :s,
        :e,
        :e,
        :w,
        :e,
        :e
      ],
      [
        :e,
        :e,
        :w,
        :e,
        :s,
        :s,
        :w,
        :n,
        :e,
        :e,
        :e,
        :n,
        :s,
        :n,
        :w,
        :w,
        :s,
        :e,
        :n,
        :e,
        :e,
        :e,
        :w,
        :s,
        :n,
        :s,
        :s,
        :s,
        :w,
        :w,
        :e,
        :s,
        :s,
        :e,
        :e,
        :s,
        :s,
        :n,
        :s,
        :s,
        :n,
        :s,
        :n,
        :n,
        :s,
        :e,
        :s,
        :w,
        :e,
        :n
      ],
      [
        :e,
        :e,
        :w,
        :e,
        :s,
        :s,
        :w,
        :n,
        :e,
        :e,
        :e,
        :n,
        :s,
        :n,
        :w,
        :w,
        :s,
        :e,
        :n,
        :e,
        :e,
        :e,
        :w,
        :s,
        :n,
        :s,
        :s,
        :s,
        :w,
        :w,
        :e,
        :s,
        :s,
        :e,
        :e,
        :s,
        :s,
        :n,
        :s,
        :s,
        :n,
        :s,
        :n,
        :n,
        :s,
        :w,
        :e,
        :w,
        :e,
        :e
      ],
      [
        :e,
        :e,
        :w,
        :e,
        :s,
        :s,
        :w,
        :n,
        :e,
        :e,
        :e,
        :n,
        :s,
        :n,
        :w,
        :w,
        :s,
        :e,
        :n,
        :e,
        :e,
        :e,
        :w,
        :s,
        :n,
        :s,
        :s,
        :s,
        :w,
        :w,
        :e,
        :s,
        :s,
        :e,
        :e,
        :s,
        :s,
        :n,
        :s,
        :s,
        :n,
        :s,
        :n,
        :n,
        :s,
        :w,
        :s,
        :w,
        :e,
        :n
      ],
      [
        :e,
        :e,
        :w,
        :e,
        :s,
        :s,
        :w,
        :n,
        :e,
        :e,
        :e,
        :n,
        :s,
        :n,
        :w,
        :w,
        :s,
        :e,
        :n,
        :e,
        :e,
        :e,
        :w,
        :s,
        :n,
        :s,
        :s,
        :s,
        :w,
        :w,
        :e,
        :s,
        :s,
        :e,
        :e,
        :w,
        :s,
        :s,
        :e,
        :s,
        :n,
        :e,
        :w,
        :n,
        :s,
        :w,
        :e,
        :w,
        :e,
        :e
      ],
      [
        :e,
        :e,
        :w,
        :e,
        :s,
        :s,
        :w,
        :n,
        :e,
        :e,
        :e,
        :n,
        :s,
        :n,
        :w,
        :w,
        :s,
        :e,
        :n,
        :e,
        :e,
        :e,
        :w,
        :s,
        :n,
        :s,
        :s,
        :s,
        :w,
        :w,
        :e,
        :s,
        :s,
        :e,
        :e,
        :w,
        :s,
        :s,
        :e,
        :s,
        :n,
        :e,
        :w,
        :n,
        :s,
        :w,
        :s,
        :w,
        :e,
        :n
      ],
      [
        :w,
        :e,
        :w,
        :e,
        :s,
        :s,
        :w,
        :n,
        :e,
        :e,
        :e,
        :n,
        :s,
        :n,
        :w,
        :w,
        :s,
        :e,
        :n,
        :e,
        :e,
        :e,
        :w,
        :s,
        :n,
        :s,
        :s,
        :s,
        :w,
        :w,
        :e,
        :s,
        :s,
        :e,
        :e,
        :s,
        :s,
        :n,
        :s,
        :s,
        :n,
        :s,
        :n,
        :n,
        :s,
        :e,
        :e,
        :w,
        :e,
        :e
      ],
      [
        :w,
        :e,
        :w,
        :e,
        :s,
        :s,
        :w,
        :n,
        :e,
        :e,
        :e,
        :n,
        :s,
        :n,
        :w,
        :w,
        :s,
        :e,
        :n,
        :e,
        :e,
        :e,
        :w,
        :s,
        :n,
        :s,
        :s,
        :s,
        :w,
        :w,
        :e,
        :s,
        :s,
        :e,
        :e,
        :s,
        :s,
        :n,
        :s,
        :s,
        :n,
        :s,
        :n,
        :n,
        :s,
        :e,
        :s,
        :w,
        :e,
        :n
      ],
      [
        :w,
        :e,
        :w,
        :e,
        :s,
        :s,
        :w,
        :n,
        :e,
        :e,
        :e,
        :n,
        :s,
        :n,
        :w,
        :w,
        :s,
        :e,
        :n,
        :e,
        :e,
        :e,
        :w,
        :s,
        :n,
        :s,
        :s,
        :s,
        :w,
        :w,
        :e,
        :s,
        :s,
        :e,
        :e,
        :s,
        :s,
        :n,
        :s,
        :s,
        :n,
        :s,
        :n,
        :n,
        :s,
        :w,
        :e,
        :w,
        :e,
        :e
      ],
      [
        :w,
        :e,
        :w,
        :e,
        :s,
        :s,
        :w,
        :n,
        :e,
        :e,
        :e,
        :n,
        :s,
        :n,
        :w,
        :w,
        :s,
        :e,
        :n,
        :e,
        :e,
        :e,
        :w,
        :s,
        :n,
        :s,
        :s,
        :s,
        :w,
        :w,
        :e,
        :s,
        :s,
        :e,
        :e,
        :s,
        :s,
        :n,
        :s,
        :s,
        :n,
        :s,
        :n,
        :n,
        :s,
        :w,
        :s,
        :w,
        :e,
        :n
      ],
      [
        :w,
        :e,
        :w,
        :e,
        :s,
        :s,
        :w,
        :n,
        :e,
        :e,
        :e,
        :n,
        :s,
        :n,
        :w,
        :w,
        :s,
        :e,
        :n,
        :e,
        :e,
        :e,
        :w,
        :s,
        :n,
        :s,
        :s,
        :s,
        :w,
        :w,
        :e,
        :s,
        :s,
        :e,
        :e,
        :w,
        :s,
        :s,
        :e,
        :s,
        :n,
        :e,
        :w,
        :n,
        :s,
        :w,
        :e,
        :w,
        :e,
        :e
      ],
      [
        :w,
        :e,
        :w,
        :e,
        :s,
        :s,
        :w,
        :n,
        :e,
        :e,
        :e,
        :n,
        :s,
        :n,
        :w,
        :w,
        :s,
        :e,
        :n,
        :e,
        :e,
        :e,
        :w,
        :s,
        :n,
        :s,
        :s,
        :s,
        :w,
        :w,
        :e,
        :s,
        :s,
        :e,
        :e,
        :w,
        :s,
        :s,
        :e,
        :s,
        :n,
        :e,
        :w,
        :n,
        :s,
        :w,
        :s,
        :w,
        :e,
        :n
      ]
    ]

    eval("test18d.txt", t18s)
  end
end
